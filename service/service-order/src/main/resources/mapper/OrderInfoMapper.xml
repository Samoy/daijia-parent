<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.atguigu.daijia.order.mapper.OrderInfoMapper">
    <!--    查询乘客订单分页-->
    <select id="findCustomerOrderPage" resultType="com.atguigu.daijia.model.vo.order.OrderListVo">
        SELECT info.id,
               info.order_no,
               info.start_location,
               info.end_location,
               IF(info.status &lt; 7, info.expect_amount, bill.pay_amount) as amount,
               info.status,
               info.create_time
        FROM order_info info
                 LEFT JOIN order_bill bill ON bill.order_id = info.id
        WHERE info.customer_id = #{customerId}
          AND info.is_deleted = 0
        ORDER BY info.create_time DESC;
    </select>
    <!--查询司机订单分页-->
    <select id="selectDriverOrderPage" resultType="com.atguigu.daijia.model.vo.order.OrderListVo">
        select info.id,
               info.order_no,
               info.start_location,
               info.end_location,
               real_amount                                                  as pay_amount,
               if(info.status &lt; 7, info.expect_amount, info.real_amount) as amount,
               info.status,
               info.create_time
        from order_info info
        where info.driver_id = #{driverId}
          and info.is_deleted = 0
        order by info.create_time desc
    </select>
</mapper>

